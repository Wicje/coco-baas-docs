---
title: OAuth Authentication
description: Authenticate users with Google, GitHub, and other providers
---

# OAuth Authentication

Authenticate users with third-party OAuth providers.

## Supported Providers

- Google
- GitHub
- Discord
- Twitter

## OAuth Flow

### Step 1: Get OAuth URL

```
GET /auth/oauth/{provider}
```

### Parameters

| Parameter | Type | Location | Required | Description |
|-----------|------|----------|----------|-------------|
| `provider` | string | path | Yes | OAuth provider (google, github) |
| `redirect_uri` | string | query | Yes | URL to redirect after auth |

### Response

```json
{
  "success": true,
  "data": {
    "url": "https://accounts.google.com/o/oauth2/v2/auth?..."
  }
}
```

### Example

```bash
curl "https://api.cocobase.buzz/auth/oauth/google?redirect_uri=https://myapp.com/callback" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

---

### Step 2: Handle Callback

After the user authenticates, they're redirected to your `redirect_uri` with a `code` parameter.

```
GET /auth/oauth/{provider}/callback
```

### Parameters

| Parameter | Type | Location | Required | Description |
|-----------|------|----------|----------|-------------|
| `provider` | string | path | Yes | OAuth provider |
| `code` | string | query | Yes | Authorization code |

### Response

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "user_abc123",
      "email": "user@gmail.com",
      "name": "John Doe",
      "avatar": "https://lh3.googleusercontent.com/...",
      "provider": "google"
    },
    "token": "eyJhbGciOiJIUzI1NiIs..."
  }
}
```

---

## Complete Examples

### JavaScript (Browser)

```javascript
// Step 1: Redirect to OAuth
async function loginWithGoogle() {
  const response = await fetch(
    "https://api.cocobase.buzz/auth/oauth/google?redirect_uri=" +
    encodeURIComponent(window.location.origin + "/callback"),
    {
      headers: {
        Authorization: "Bearer YOUR_API_KEY",
      },
    }
  );

  const { data } = await response.json();
  window.location.href = data.url;
}

// Step 2: Handle callback (on /callback page)
async function handleCallback() {
  const urlParams = new URLSearchParams(window.location.search);
  const code = urlParams.get("code");

  const response = await fetch(
    `https://api.cocobase.buzz/auth/oauth/google/callback?code=${code}`,
    {
      headers: {
        Authorization: "Bearer YOUR_API_KEY",
      },
    }
  );

  const { data } = await response.json();
  localStorage.setItem("authToken", data.token);
  window.location.href = "/dashboard";
}
```

### GitHub OAuth

```javascript
async function loginWithGitHub() {
  const response = await fetch(
    "https://api.cocobase.buzz/auth/oauth/github?redirect_uri=" +
    encodeURIComponent(window.location.origin + "/callback"),
    {
      headers: {
        Authorization: "Bearer YOUR_API_KEY",
      },
    }
  );

  const { data } = await response.json();
  window.location.href = data.url;
}
```

### Python (Server-side)

```python
import requests
from flask import Flask, redirect, request

app = Flask(__name__)
API_KEY = "YOUR_API_KEY"

@app.route("/login/google")
def login_google():
    response = requests.get(
        "https://api.cocobase.buzz/auth/oauth/google",
        headers={"Authorization": f"Bearer {API_KEY}"},
        params={"redirect_uri": "http://localhost:5000/callback"},
    )
    data = response.json()["data"]
    return redirect(data["url"])

@app.route("/callback")
def callback():
    code = request.args.get("code")

    response = requests.get(
        "https://api.cocobase.buzz/auth/oauth/google/callback",
        headers={"Authorization": f"Bearer {API_KEY}"},
        params={"code": code},
    )

    data = response.json()["data"]
    # Store user and token in session
    return f"Welcome {data['user']['name']}!"
```

## Error Responses

### Invalid Provider

```json
{
  "success": false,
  "error": {
    "code": "INVALID_PROVIDER",
    "message": "OAuth provider not supported"
  }
}
```

### Invalid Code

```json
{
  "success": false,
  "error": {
    "code": "INVALID_CODE",
    "message": "Authorization code is invalid or expired"
  }
}
```

### OAuth Error

```json
{
  "success": false,
  "error": {
    "code": "OAUTH_ERROR",
    "message": "Failed to authenticate with provider"
  }
}
```
